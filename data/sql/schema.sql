CREATE TABLE category (id BIGINT AUTO_INCREMENT, name VARCHAR(150) NOT NULL, description TEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE client (id BIGINT AUTO_INCREMENT, first_name VARCHAR(150) NOT NULL, last_name VARCHAR(150) NOT NULL, email_address VARCHAR(150) NOT NULL, address VARCHAR(150) NOT NULL, number VARCHAR(8) NOT NULL, city VARCHAR(150) NOT NULL, commune VARCHAR(150) NOT NULL, username VARCHAR(150) NOT NULL, password VARCHAR(150) NOT NULL, user_id BIGINT NOT NULL, user_type VARCHAR(255), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE comment (id BIGINT AUTO_INCREMENT, name VARCHAR(150) NOT NULL, email VARCHAR(150) NOT NULL, url VARCHAR(150) NOT NULL, comment TEXT NOT NULL, state VARCHAR(255), user_id INT NOT NULL, post_id BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX post_id_idx (post_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE pedido (id INT AUTO_INCREMENT, user_id INT, estado VARCHAR(255) NOT NULL, created_at CHAR(19) NOT NULL, updated_at CHAR(19) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE pedido_tb_articulos (id BIGINT AUTO_INCREMENT, tb_articulos_id VARCHAR(15), pedido_id INT, INDEX pedido_id_idx (pedido_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE post_index (keyword VARCHAR(200), field VARCHAR(50), position BIGINT, id BIGINT, PRIMARY KEY(keyword, field, position, id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE post (id BIGINT AUTO_INCREMENT, title VARCHAR(150) NOT NULL, content TEXT NOT NULL, date DATETIME NOT NULL, state VARCHAR(255), user_id INT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, slug VARCHAR(255), UNIQUE INDEX post_sluggable_idx (slug), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE post_category (post_id BIGINT, category_id BIGINT, PRIMARY KEY(post_id, category_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE post_tag (post_id BIGINT, tag_id BIGINT, PRIMARY KEY(post_id, tag_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tag (id BIGINT AUTO_INCREMENT, name VARCHAR(150) NOT NULL, description TEXT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_ArticuloCategoria (idallgestempresa FLOAT(12, 2), idempresa FLOAT(12, 2), idarticulo VARCHAR(15), idcategoria FLOAT(8, 2), idaccesorio FLOAT(7, 2), PRIMARY KEY(idallgestempresa, idempresa, idarticulo, idcategoria, idaccesorio)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_Articulos (idallgestempresa FLOAT(12, 2) DEFAULT 2, idempresa FLOAT(12, 2) DEFAULT 1, idarticulo VARCHAR(15), idcategoria INT NOT NULL, idaccesorio INT NOT NULL, nombreweb VARCHAR(100), textoweb TEXT, modelo VARCHAR(60), marca VARCHAR(60), imagen VARCHAR(50), idgrupoarticulo INT, idsubgrupoarticulo INT, siactivadoweb INT NOT NULL, idestado INT, idestadoventas INT NOT NULL, precioventa FLOAT(20, 2), PRIMARY KEY(idallgestempresa, idempresa, idarticulo)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_CatalogoAccesorios (idallgestempresa FLOAT(12, 2), idempresa FLOAT(12, 2), idcategoria FLOAT(20, 2), idaccesorio FLOAT(7, 2), nombre VARCHAR(50), siacivadoweb FLOAT(20, 2), nombreweb VARCHAR(20), PRIMARY KEY(idallgestempresa, idempresa, idcategoria, idaccesorio)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_CatalogoCategoria (idallgestempresa FLOAT(12, 2), idempresa FLOAT(12, 2), idcategoria FLOAT(8, 2), nombre VARCHAR(20), siacivadoweb FLOAT(20, 2), PRIMARY KEY(idallgestempresa, idempresa, idcategoria)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_ClienteEmpresa (idallgestempresa INT, idempresa INT, idcliente VARCHAR(15), correlativo VARCHAR(45), giro VARCHAR(60), fono VARCHAR(50), celular VARCHAR(20), fax VARCHAR(20), email VARCHAR(45), siclienteweb INT, claveweb VARCHAR(15), PRIMARY KEY(idallgestempresa, idempresa, idcliente)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE tb_OfertasPorArticulo (idallgestempresa INT DEFAULT 2, idempresa INT DEFAULT 1, idarticulo VARCHAR(15), correlativooferta INT, bultooferta INT, preciooferta INT, fechaactualizacion CHAR(19), idusuario VARCHAR(15), PRIMARY KEY(idallgestempresa, idempresa, idarticulo, correlativooferta, bultooferta)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE visit (id BIGINT AUTO_INCREMENT, ip VARCHAR(150) NOT NULL, date DATE, post_id BIGINT NOT NULL, INDEX post_id_idx (post_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_forgot_password (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, unique_key VARCHAR(255), expires_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id BIGINT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id BIGINT AUTO_INCREMENT, user_id BIGINT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX user_id_idx (user_id), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id BIGINT AUTO_INCREMENT, first_name VARCHAR(255), last_name VARCHAR(255), email_address VARCHAR(255), username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128) NOT NULL, is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id BIGINT, group_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id BIGINT, permission_id BIGINT, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE comment ADD CONSTRAINT comment_post_id_post_id FOREIGN KEY (post_id) REFERENCES post(id);
ALTER TABLE pedido_tb_articulos ADD CONSTRAINT pedido_tb_articulos_pedido_id_pedido_id FOREIGN KEY (pedido_id) REFERENCES pedido(id);
ALTER TABLE post_index ADD CONSTRAINT post_index_id_post_id FOREIGN KEY (id) REFERENCES post(id) ON UPDATE CASCADE ON DELETE CASCADE;
ALTER TABLE post_category ADD CONSTRAINT post_category_post_id_post_id FOREIGN KEY (post_id) REFERENCES post(id);
ALTER TABLE post_category ADD CONSTRAINT post_category_category_id_category_id FOREIGN KEY (category_id) REFERENCES category(id);
ALTER TABLE post_tag ADD CONSTRAINT post_tag_tag_id_tag_id FOREIGN KEY (tag_id) REFERENCES tag(id);
ALTER TABLE post_tag ADD CONSTRAINT post_tag_post_id_post_id FOREIGN KEY (post_id) REFERENCES post(id);
ALTER TABLE visit ADD CONSTRAINT visit_post_id_post_id FOREIGN KEY (post_id) REFERENCES post(id);
ALTER TABLE sf_guard_forgot_password ADD CONSTRAINT sf_guard_forgot_password_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD CONSTRAINT sf_guard_group_permission_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD CONSTRAINT sf_guard_remember_key_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD CONSTRAINT sf_guard_user_group_group_id_sf_guard_group_id FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_user_id_sf_guard_user_id FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD CONSTRAINT sf_guard_user_permission_permission_id_sf_guard_permission_id FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
